{% extends "layout.html" %}

{% block title %}Moodiary - ê°ì • ì¼ê¸° ëª©ë¡{% endblock %}

{% block content %}
  <section class="main-top">
    <h2>ğŸ“˜ ê³µê°œëœ ê°ì • ì¼ê¸°ë“¤</h2>
    {% if current_user.is_authenticated %}
      <a class="primary-btn" href="{{ url_for('create_post') }}">+ ìƒˆ ê°ì • ê¸°ë¡í•˜ê¸°</a>
    {% else %}
      <p class="notice">ê°ì •ì„ ê¸°ë¡í•˜ë ¤ë©´ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”</p>
    {% endif %}
  </section>

  <section class="post-list">
    {% for post in posts %}
      <div class="post-card">
        <a href="{{ url_for('post_detail', post_id=post.id) }}">
          <h3>{{ post.title if post.title else '[ì œëª© ì—†ëŠ” ê°ì •]' }}</h3>
        </a>
        <p class="post-date">{{ post.created_at|format_kst }}</p>
      </div>
    {% else %}
      <p class="no-post">ì•„ì§ ê³µê°œëœ ê°ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}
  </section>

  <div class="pagination">
    {% if posts.has_prev %}
      <a href="{{ url_for('index', page=posts.prev_num) }}">Â« ì´ì „</a>
    {% endif %}

    {% for p in range(1, posts.pages + 1) %}
      <a href="{{ url_for('index', page=p) }}" {% if p == posts.page %}class="active"{% endif %}>{{ p }}</a>
    {% endfor %}

    {% if posts.has_next %}
      <a href="{{ url_for('index', page=posts.next_num) }}">ë‹¤ìŒ Â»</a>
    {% endif %}
  </div>
{% endblock %}
